<!DOCTYPE html>
<html>
  <head>
    <base href="<%=basePath%>">
    
    <title>My JSP 'hmjsonpTest.jsp' starting page</title>
    
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="expires" content="0">    
	<meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
	<meta http-equiv="description" content="This is my page">
	<!--
	<link rel="stylesheet" type="text/css" href="styles.css">
	-->
<script src="js/jquery.min.js" ></script>
  </head>
  
  <body>
    <div>dsadsadsa</div>
    <script>
    	function loadJson(){
				//get请求   
				//jsonpCallback=?一定不能变  jqery做处理了  
				//可以理解成匿名还输指向下面的回调函数  原生的可以自己写函数名
				/*
				$.getJSON("http://localhost/xiaoai_jsonp/index.jsp?id=1111&jsonpCallback=?",
				function(data){
					alert(JSON.stringify(data))
				});
				*/
				//原生jsonp
				//把回调函数根据链接传进去  在服务器端执行
				/*
				var xhr = new XMLHttpRequest();
				xhr.open("get","http://localhost/xiaoai_jsonp/index.jsp?id=1111&jsonpCallback=callback");
				xhr.onreadystatechange=function(){
					if(this.readyState==4&&this.status==200){
					alert(this.responseText);
					eval(this.responseText);
					}
				}
				xhr.send();
				*/
				
				//jqery
				$.ajax({  
					type : "get",  
					async:false,  
					url : "http://localhost:8080/app/hm/side/add.action?key=71754E4154114EF882C92FCFDC7DE0E1&sideName=正佳广场&sid=004401004&province=广东省&city=广东市&longitude=113.412372&latitudes=23.160851",
					dataType : "jsonp",//数据类型为jsonp
					jsonp: "jsonpCallback",//服务端用于接收callback调用的function名的参数  
					success : function(data){  
						console.log(data)
					},  
					error:function(data){  
						console.log(data)
					}  
				});
			}
				/*function callback(content){
				alert(JSON.stringify(content))
				}*/
				loadJson();
			
    </script>
  </body>
</html>
