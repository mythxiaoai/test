<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="Generator" content="EditPlus®">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <title>QQ空间图片预览</title>
  <style>
	*{padding:0;margin:0}
	body{font-size:14px;font-family:"微软雅黑";}
	a{text-decoration:none;color:#333}
	li{list-style:none}
	img{border:0;}
	#box{margin:100px auto 0;padding:0;width:940px;overflow:hidden}
	#box li{float:left;margin:0 0 10px 10px;box-sizing:border-box;}
	#box li img{width:300px;height:200px;display:block;border:1px solid #111}
	/*弹出层*/
	#imgpreview{width:1200px;position:absolute;height:600px;top:50%;left:50%;max-width:1400px;max-height:600px;margin-left:-600px;margin-top:-300px;z-index:2;background:#fff;}
	#imgpreview .cl{width:840px;height:600px;float:left;background:#141414;position:relative;}
	#imgpreview .cl .timgbox{width:820px;margin:10px auto 0;height:580px;position:relative;background:#fff}
	#imgpreview .cl .timgbox img{display:block;position:absolute;top:0;left:0}
	#imgpreview .cr{width:360px;height:inherit;float:left}
	#imgpreview .cr .content{text-indent:2em;width:320px;margin:20px auto 0;height:560px;text-align:justify}
	.overflow{background:#000;position:absolute;top:0;left:0;width:100%;height:100%;opacity:0.5;z-index:1;filter:alpha(opacity=50);}
	/*关闭按钮*/
	#imgpreview .r_img{position:absolute;right:-12px;top:-12px;display:none;}
	#imgpreview:hover .r_img{display:block;}
	#imgpreview .prev{position:absolute;top:0px;left:0px;height:88%;z-index:1;cursor:url('images/prev.cur'),auto;width:49%;}
	#imgpreview .next{position:absolute;top:0px;right:0%;height:88%;z-index:1;cursor:url('images/next.cur'),auto;width:49%;}
	.icon{background:url("images/icon.png");display:inline-block;}
	.close{background-position:0 0;width:28px;height:28px;}
	.yes{background-position:0 -30px;width:28px;height:28px;}

  </style>
 </head>
 <body>
	<div id="box">
		<ul id="imgbox">
			<li>
				<img src="images/3.jpg" draggable="false"/>
				<span style="display:none;">无人驾驶汽车：无人驾驶汽车原本是Google X下面的项目，但是最近他们自己找来了一位“CEO”，有望在2016年独立出来，成为Alphabet子公司。

Google Fiber：Google Fiber目前还不是独立公司，它隶属于Access and Energy，也就是谷歌2014年成立的一个部门。Alphabet的CFO Ruth Porat在最新一份财报中提到了这一细节。Access and Energy的产品包括Google Onhub智能路由器和泰坦无人机。：</span>	
			</li>
			<li>
				<img src="images/4.jpg" draggable="false"/>
				<span style="display:none;">谈到产品，我们要先从谷歌的掌上明珠——安卓谈起。如果说我们目前为止听说的所有项目都能成功上线产品，那么安卓将会无处不在。现在，谷歌的手表、手机、平板及电视都采用了安卓系统，而如果传言为真，那么安卓接下来可能还会登陆谷歌的PC、无人驾驶汽车、VR头盔及物联网设备。安卓与谷歌内部各项目的关系越来越密切，从这一点来看，安卓很可能会借鉴公司开发的其他OS，比如Chrome OS，并最终与之融合。
</span>	
			</li>

			<li>
				<img src="images/5.jpg" draggable="false"/>
				<span style="display:none;">ATAP：全名叫“谷歌高级技术与产品部（Google Advanced Technology and Products）”，我们觉得它也有可能成为独立子公司，因为它的负责人大有来头，是前美国国防高级研究计划局局长。不过，谷歌最近向Mashable证实，ATAP目前仍然隶属于谷歌。

谷歌近期还对外宣布，他们正在考虑将由前VMWare CEO Diane Greene掌管的云服务独立出去，不过云服务是会成为谷歌的独立部门，还是Alphabet的独立子公司？新部门或公司叫什么名字？我们还不得而知。由明星CEO带头单飞看起来也是走了Calico、Sidewalk Labs、Replicant以及Verily的老路，不过我们还没有听到任何官方消息。</span>	
			</li>
			<li>
				<img src="http://www.huxiu.com/static_2015/img/logo.png" draggable="false"/>
				<span style="display:none;">谷歌的许多项目都没有包含在这份清单中，所以Alphabet实际上的业务一定要比最初宣布成立时复杂得多。在综合了新闻报道和网上其他信源可靠的消息后，我们对最初的清单做了补充，并最终敲定了以下这份清单：</span>	
			</li>
			<li>
				<img src="images/7.jpg" draggable="false"/>
				<span style="display:none;">根据《华尔街时报》的报道，Chrome OS将被“融入”安卓系统，而这款融合系统将进军PC市场。一石激起千层浪，Re/Code、TechChurch、Business Insider都对此进行了跟踪报道，最后大家一直认为，安卓进军PC，这事儿确实是来真的。

《华尔街时报》称，最终版本的OS将在2017年推出，但谷歌会在16年放出一个“早期版本”。PC版安卓系统真正投入使用，需要谷歌和第三方应用开发者做出大量调整，所以放出系统雏形也是有道理的，这样大家就能尽早进行相关的开发工作，正如安卓M也将经历一段很长的开发者“预览期”。
</span>
			</li>
		</ul>
	</div>

	<script src="js/dom.js"></script>
	<script>
		window.onload = function(){
			//鼠标滚轮事件 onwhseel
			//图片预览
			var imgDoms = dom("imgbox").getElementsByTagName("img");
			//循环图片
			for(var i=0,len=imgDoms.length;i<len;i++){
				//图片赋予点击事件
				imgDoms[i].onclick = function(){
					//获取每张图片的对应的内容
					changePic(this);
				}
			};
			//更换图片
			function changePic(obj){
				var content = obj.nextElementSibling.innerHTML;
				//如果图片加载完毕
					ImageFinised(obj.src,function(){
						//等比例缩放的值
						var xw = 820;
						var xy = 580;
						//调用等比例缩放的，获取所缩放后的宽度和高度
						var ipos = resizeImg(this,xw,xy);
						//用于展示图片的设定
						ipos.src = this.src;
						//设定图片对应的内容
						ipos.content = content;
						//调用图片弹出层
						showDialog(ipos,function(imgDom){
							//计算突破在展示区域的左边 ,imgDom代表大图片的dom对象
							var cleft = (xw - ipos.width)/2;
							var ctop = (xy - ipos.height)/2;
							//赋予坐标位置
							imgDom.style.left = cleft+"px";
							imgDom.style.top = ctop+"px";

						});
					});
			}
			//定义弹出预览层 120 * 120 --- 1200 * 1200
			function showDialog(opts,callback){
				//内容文本
				var html = "<div class='cl'><a href='javascript:void(0);' class='prev'></a><a href='javascript:void(0);' class='next'></a>"+
				"		<div class='timgbox'><img id='targetImg' width='"+opts.width+"' height='"+opts.height+"' draggable='false' src='"+opts.src+"'/></div>"+
				"	</div>"+
				"	<div class='cr'>"+
				"		<div class='content'>"+opts.content+"</div>"+
				"	</div><a href='javascript:void(0)' class='r_img'><span class='icon close'></span></a>";
				//获取是否已经创建过了图片预览层
				var viewDom = dom("imgpreview");
				//如果存在就先删除，防止重复点击过程中重复产生的原因
				if(viewDom)document.body.removeChild(viewDom);
				//创建一个预览窗口
				var previesDom = document.createElement("div");
				previesDom.index = 0;
				//追加文本内容
				previesDom.innerHTML = html;
				//定义样式id
				previesDom.id = "imgpreview";
				//添加到body中
				document.body.appendChild(previesDom);
				//创建一个遮罩层
				var overDom =  document.createElement("div");
				//添加遮罩层样式
				overDom.className = "overflow";
				//赋予点击事件。关闭图片预览层
				overDom.onclick = function(){
					//动画关闭
					kekeAnimate(previesDom,{opacity:0},function(){
						document.body.removeChild(this);
						kekeAnimate(overDom,{opacity:0},function(){
							document.body.removeChild(this);
						});
					});
				};

				//关闭按钮事件
				previesDom.children[2].onclick = function(){
					kekeAnimate(previesDom,{opacity:0},function(){
						document.body.removeChild(this);
						kekeAnimate(overDom,{opacity:0},function(){
							document.body.removeChild(this);
						});
					});
				}
				//追加窗口中。
				//上一张和下一张的事件
				//imgDoms[previesDom.index++];
				//imgDoms[previesDom.index--];
				document.body.appendChild(overDom);
				if(callback)callback.call(previesDom,dom("targetImg"));
			};
			
		};

		

			
		//判断图片是否加载完毕，执行的函数
		function ImageFinised(src,callback){
			var img = new Image();
			img.src = src;
			if(img.complete){//ie的写法678
				if(callback)callback.call(img);
			}else{
				//goole firefox写法
				img.onreadystatechange = function () {

				}
				img.onload = function () {
					if(callback)callback.call(img);
				}
				img.onerror = function () {
					alert("图片加载失败或没有找到...",1);
				}
			}
		};
		//图片的等比例缩放
		function resizeImg(img,iwidth,iheight){ 
		    var image= img;  
		    var boxWH = {};
		    if(image.width>0 && image.height>0){
		     	boxWH.width=image.width;
		     	boxWH.height=image.height;	    
		        if(boxWH.width>iwidth){    
		          	boxWH.height = (boxWH.height*iwidth)/boxWH.width;  
		            boxWH.width = iwidth;   
		        }

		        if(boxWH.height>iheight){    
		          	boxWH.width = (boxWH.width*iheight)/boxWH.height;;   
		            boxWH.height = iheight;	             	 
		         }    	           
		    }   
		    return boxWH;
		} ;
	</script>
 </body>
</html>
